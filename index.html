<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Install your Postgres virtual machine by Esme-Sudria-Database</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Install your Postgres virtual machine</h1>
      <h2 class="project-tagline">Vagrant and ansible recipe to create a virtual machine on virtual box that hosts postgresql database</h2>
      <a href="https://github.com/Esme-Sudria-Database/Vagrant-Postgresql" class="btn">View on GitHub</a>
      <a href="https://github.com/Esme-Sudria-Database/Vagrant-Postgresql/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/Esme-Sudria-Database/Vagrant-Postgresql/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p>This repository contains scripts to create a virtual machine that exposes databases we use
during classes:</p>

<ul>
<li>sportsdb</li>
<li>pizza_shop</li>
<li>transtats (you have to continue the installation with <a href="https://github.com/Esme-Sudria-Database/Flywaydb-Transtats">Flywaydb-Transtats</a>)</li>
<li>bio_icare_drone</li>
<li>bloon_project</li>
</ul>

<p><img src="https://cloud.githubusercontent.com/assets/159559/10293161/9bb4f68c-6ba2-11e5-8759-8c9caa0e20d3.png" alt="pgadmin3"></p>

<h1>
<a id="setup-your-computer" class="anchor" href="#setup-your-computer" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setup your computer</h1>

<p>You will need those softwares on your computer :</p>

<ul>
<li><a href="https://www.virtualbox.org/">Virtual box</a></li>
<li><a href="https://www.vagrantup.com/">Vagrant</a></li>
<li><a href="https://git-scm.com/">Git</a></li>
</ul>

<h2>
<a id="on-linux" class="anchor" href="#on-linux" aria-hidden="true"><span class="octicon octicon-link"></span></a>On linux</h2>

<pre><code>sudo apt-get install virtualbox
sudo apt-get install vagrant
sudo apt-get install git
</code></pre>

<h2>
<a id="on-windows" class="anchor" href="#on-windows" aria-hidden="true"><span class="octicon octicon-link"></span></a>On windows</h2>

<p>Download and install the 3 softwares above.</p>

<h1>
<a id="install-the-box" class="anchor" href="#install-the-box" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install the box</h1>

<p>Clone this repository :</p>

<pre><code>git clone https://github.com/Esme-Sudria-Database/Vagrant-Postgresql.git
</code></pre>

<p>To create the virtual machine, use the command</p>

<pre><code>cd Vagrant-Postgresql
vagrant up
</code></pre>

<p>This script will use image from ubuntu 14.04. Ansible will install Postgresql from apt repository and other dependencies, then it will configure it to open network access (don't do that in production).</p>

<p>Next it wil create a database, and import sportsdb sample.</p>

<h1>
<a id="database-usage" class="anchor" href="#database-usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Database usage</h1>

<h2>
<a id="use-web-admin-adminer" class="anchor" href="#use-web-admin-adminer" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use web admin adminer</h2>

<p><a href="https://www.adminer.org/">Adminer</a> is a generic client for different databases written in PHP.
You can use it from a browser :</p>

<ul>
<li><a href="http://192.168.33.10/adminer">http://192.168.33.10/adminer</a></li>
</ul>

<p>Here is the logging information to use :</p>

<ul>
<li>System : PostgreSQL</li>
<li>Serveur : localhost</li>
<li>Utilisateur : user</li>
<li>Mot de passe : user</li>
</ul>

<h2>
<a id="use-pgadmin3" class="anchor" href="#use-pgadmin3" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use pgadmin3</h2>

<p>You can use pgadmin3 against this virtual machine. When you create a profile, set the host to 192.168.33.10:5432</p>

<p>You can use either the account admin:admin or user:user as login:password.</p>

<p><img src="https://cloud.githubusercontent.com/assets/159559/10293207/d3642ec2-6ba2-11e5-8c4f-8a39e3f1c7f3.png" alt="server7"></p>

<p>admin is a power user on postgresql database (never do that in production !).</p>

<h2>
<a id="use-command-line-and-psql" class="anchor" href="#use-command-line-and-psql" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use command line and psql</h2>

<pre><code>ssh user@192.168.33.10
</code></pre>

<p>You should access to the vm. Use the following command to manipulate database</p>

<pre><code>psql sportsdb
</code></pre>

<h1>
<a id="connect-to-virtualbox-as-administrator" class="anchor" href="#connect-to-virtualbox-as-administrator" aria-hidden="true"><span class="octicon octicon-link"></span></a>Connect to virtualbox as administrator</h1>

<pre><code>vagrant ssh
</code></pre>

<h1>
<a id="check-ansible-playbook" class="anchor" href="#check-ansible-playbook" aria-hidden="true"><span class="octicon octicon-link"></span></a>Check ansible playbook</h1>

<pre><code>make tests
</code></pre>

<p>If it doesn't work due to missing ansible-galaxy roles, use :</p>

<pre><code>bash scripts/bootstrap-tests.sh
</code></pre>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/Esme-Sudria-Database/Vagrant-Postgresql">Install your Postgres virtual machine</a> is maintained by <a href="https://github.com/Esme-Sudria-Database">Esme-Sudria-Database</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
